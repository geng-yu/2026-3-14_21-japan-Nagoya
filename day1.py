import streamlit as st
import pandas as pd
from utils import get_gmap_link

def show():
    st.header("âœˆï¸ Day 1: å•Ÿç¨‹å‰å¾€é‡‘æ¾¤")
    
    # --- é£›æ©Ÿ ---
    with st.container(border=True):
        st.markdown("### ğŸ›« åœ‹æ³°èˆªç©º CX530")
        col1, col2 = st.columns(2)
        col1.write("12:00 TPE èµ·é£› â†’ 15:35 NGO æŠµé”")

    # --- Step 1: æ©Ÿå ´åˆ°åå¤å±‹ (é›»è»Š) ---
    st.subheader("1ï¸âƒ£ æ©Ÿå ´ â” åéµåå¤å±‹ç«™")
    
    # [ä¿®æ­£] ç´…è‰²æé†’ï¼šåŠ å…¥ Highwaybus é€£çµ
    st.warning("âš ï¸ é‡è¦æé†’ï¼šç¢ºèªè»Šæ¬¡å¾Œï¼Œå·´å£« **ç™¼è»Šå‰ 30 åˆ†é˜** ä»˜æ¬¾å–ç¥¨ï¼[å·´å£«ä»˜æ¬¾é é¢](https://www.highwaybus.com/gp/reference/refCertification?refCertSelected=selected)")
    st.info("ğŸ’¡ æ­ä¹˜ **åéµé›»è»Š (Meitetsu Line)** å‰å¾€å¸‚å€")
    
    # [ä¿®æ­£] æ™‚åˆ»è¡¨ï¼šåŠ å…¥åéµå®˜ç¶²é€£çµèˆ‡ç¾é‡‘æé†’
    with st.expander("ğŸš† é»æˆ‘çœ‹ï¼šåéµé›»è»Šæ™‚åˆ»è¡¨ (16:00-18:00)", expanded=False):
        st.markdown("æ©Ÿå™¨è²·åªèƒ½ç”¨ç¾é‡‘ï¼Œå»ºè­°æ­ä¹˜ Î¼-Sky (+450å††)  [å®˜ç¶²æ™‚åˆ»è¡¨](https://trainbus.meitetsu.co.jp/meitetsu-transfer-zh-tw/pc/transfer/DepArrTimeList?snode=00009406&gnode=00004372&date=2026-01-17&depTime=16)")
        st.markdown("[å®˜ç¶²æ™‚åˆ»è¡¨](https://trainbus.meitetsu.co.jp/meitetsu-transfer-zh-tw/pc/transfer/DepArrTimeList?snode=00009406&gnode=00004372&date=2026-01-17&depTime=16)")
        schedule_data = [
             {"ç™¼è»Š": "16:07", "æŠµé”": "16:35", "æ­ä¹˜æ™‚é–“": "28åˆ†", "è»Šç¨®": "Î¼-Sky"},
             {"ç™¼è»Š": "16:17", "æŠµé”": "16:54", "æ­ä¹˜æ™‚é–“": "37åˆ†", "è»Šç¨®": "ç‰¹æ€¥"},
             {"ç™¼è»Š": "16:22", "æŠµé”": "17:10", "æ­ä¹˜æ™‚é–“": "48åˆ†", "è»Šç¨®": "æº–æ€¥"},
             {"ç™¼è»Š": "16:37", "æŠµé”": "17:05", "æ­ä¹˜æ™‚é–“": "28åˆ†", "è»Šç¨®": "Î¼-Sky"},
             {"ç™¼è»Š": "16:47", "æŠµé”": "17:24", "æ­ä¹˜æ™‚é–“": "37åˆ†", "è»Šç¨®": "ç‰¹æ€¥"},
             {"ç™¼è»Š": "16:52", "æŠµé”": "17:40", "æ­ä¹˜æ™‚é–“": "48åˆ†", "è»Šç¨®": "æº–æ€¥"},
             {"ç™¼è»Š": "17:07", "æŠµé”": "17:35", "æ­ä¹˜æ™‚é–“": "28åˆ†", "è»Šç¨®": "Î¼-Sky"},
             {"ç™¼è»Š": "17:17", "æŠµé”": "17:54", "æ­ä¹˜æ™‚é–“": "37åˆ†", "è»Šç¨®": "ç‰¹æ€¥"},
             {"ç™¼è»Š": "17:22", "æŠµé”": "18:10", "æ­ä¹˜æ™‚é–“": "48åˆ†", "è»Šç¨®": "æº–æ€¥"},
             {"ç™¼è»Š": "17:37", "æŠµé”": "18:05", "æ­ä¹˜æ™‚é–“": "28åˆ†", "è»Šç¨®": "Î¼-Sky"},
             {"ç™¼è»Š": "17:47", "æŠµé”": "18:24", "æ­ä¹˜æ™‚é–“": "37åˆ†", "è»Šç¨®": "ç‰¹æ€¥"},
             {"ç™¼è»Š": "17:52", "æŠµé”": "18:40", "æ­ä¹˜æ™‚é–“": "48åˆ†", "è»Šç¨®": "æº–æ€¥"},
        ]
        
        df = pd.DataFrame(schedule_data)
        st.dataframe(
            df, 
            hide_index=True, 
            use_container_width=True,
            column_order=["ç™¼è»Š", "æŠµé”", "æ­ä¹˜æ™‚é–“", "è»Šç¨®"]
        )

    # --- Step 2: è½‰ä¹˜èˆ‡è³¼ç‰© ---
    st.subheader("2ï¸âƒ£ è½‰ä¹˜ï¼šåéµå·´å£«ä¸­å¿ƒ")
    
    # [ä¿®æ­£] é€™è£¡ä¹Ÿè£œä¸Š Highwaybus é€£çµ
    st.markdown("ğŸ”— [å·´å£«é ç´„ä»˜æ¬¾é é¢](https://www.highwaybus.com/gp/reference/refCertification?refCertSelected=selected)")

    st.markdown("""
    **å‹•ç·šæŒ‡å¼•ï¼š**
    1. åˆ°é”åéµåå¤å±‹ç«™ (B1F)
    2. æ‰¾ **[è¥¿æ”¹æœ­å£]** å‡ºç«™
    3. æ­é›»æ¢¯è‡³ **3F åéµå·´å£«ä¸­å¿ƒ**
    """)
    
    st.link_button("ğŸ“ å°èˆªï¼šåéµå·´å£«ä¸­å¿ƒ (6è™Ÿä¹˜è»Šè™•)", get_gmap_link("åéµå·´å£«ä¸­å¿ƒ 1 Chome-2-4 Meieki, Nakamura Ward, Nagoya, Aichi 450-0002æ—¥æœ¬", "transit"), type="primary")

    

    # --- Step 3: å·´å£«å‰å¾€é‡‘æ¾¤ ---
    st.subheader("3ï¸âƒ£ é«˜é€Ÿå·´å£« â” é‡‘æ¾¤")
    st.write("ğŸšŒ **ä¹˜è»Šè™•ï¼š3æ¨“ 6è™Ÿæœˆå° ï¼Œ é ç´„ç­æ¬¡ï¼š17:30 æˆ– 18:30** ")
    st.info("ğŸ’¡ **ï¼š** åœ¨é™„è¿‘è³¼è²·é»å¿ƒã€æ™šé¤ (ç¨å¾Œè»Šä¸Šåƒ)ã€‚")
    # --- Step 4: ä½å®¿è³‡è¨Š ---
    st.divider()
    # [ä¿®æ­£] æ¨™é¡Œæ”¹ç‚ºé£¯åº—åç¨±
    st.subheader("ğŸ¨ é‡‘æ¾¤ç«™è¥¿å£å¤§å’ŒRoyneté£¯åº—")
    
    # [ä¿®æ­£] å°èˆªæŒ‰éˆ•ç§»è‡³é€™è£¡
    st.link_button("ğŸ—ºï¸ å°èˆª", get_gmap_link("1 Chome-12-17 Hirooka, Kanazawa, Ishikawa 920-0031æ—¥æœ¬", "walking"))
    
    with st.container(border=True):
        st.text("Daiwa Roynet Hotel KANAZAWAEKI-NISHIGUCHI")
        st.text("ãƒ€ã‚¤ãƒ¯ãƒ­ã‚¤ãƒãƒƒãƒˆãƒ›ãƒ†ãƒ« é‡‘æ²¢é§…è¥¿å£")
        st.text("ğŸ“ æ—¥ï¼šã€’920-0031 çŸ³å·çœŒé‡‘æ²¢å¸‚åºƒå²¡1-12-17")
        st.text("ğŸ“ è‹±ï¼š1-12-17, Hirooka, Kanazawa-shi, Ishikawa 920-0031")
