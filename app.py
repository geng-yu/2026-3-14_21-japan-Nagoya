import streamlit as st
import pandas as pd
from datetime import datetime, date

# --- 1. é é¢åŸºæœ¬è¨­å®š ---
st.set_page_config(
    page_title="2026 åå¤å±‹",
    page_icon="ğŸ‡¯ğŸ‡µ",
    layout="centered",
    initial_sidebar_state="collapsed"
)

# --- 2. æ‰‹æ©Ÿç‰ˆ CSS å„ªåŒ– ---
st.markdown("""
    <style>
    /* æŒ‰éˆ•æ¨£å¼åœ“è§’åŒ– */
    .stButton button {
        width: 100%;
        border-radius: 20px;
        font-weight: bold;
        border: 1px solid #ddd;
    }
    /* èª¿æ•´æ¨™é¡Œé–“è· */
    h2, h3 {
        padding-top: 10px;
        padding-bottom: 10px;
    }
    /* éš±è—é¸å–®å’Œ footer */
    #MainMenu {visibility: hidden;}
    footer {visibility: hidden;}
    
    /* è‡ªè¨‚å®¹å™¨æ¨£å¼ */
    .day-card {
        background-color: #f9f9f9;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 10px;
        border: 1px solid #eee;
    }
    </style>
""", unsafe_allow_html=True)

# --- 3. Google Map é€£çµç”¢ç”Ÿå™¨ ---
def get_gmap_link(query, mode="transit"):
    # mode: driving (é–‹è»Š), walking (èµ°è·¯), transit (å¤§çœ¾é‹è¼¸)
    base_url = "https://www.google.com/maps/dir/?api=1"
    # destination ç•™ç©ºå‰‡ç”±ä½¿ç”¨è€…è¼¸å…¥ï¼Œé€™è£¡æˆ‘å€‘ç›´æ¥æŒ‡å®šç›®çš„åœ°
    return f"{base_url}&destination={query}&travelmode={mode}"

# --- 4. æ—¥æœŸèˆ‡è¡Œç¨‹è³‡æ–™è¨­å®š ---
trip_dates = {
    "1/17 (å…­) Day 1: å‡ºç™¼ & ç§»å‹•": date(2026, 1, 17),
    "1/18 (æ—¥) Day 2: é‡‘æ¾¤å¸‚å€": date(2026, 1, 18),
    "1/19 (ä¸€) Day 3: åˆæŒæ‘ & é£›é©’": date(2026, 1, 19),
    "1/20 (äºŒ) Day 4: æ–°ç©—é«˜ & é«˜å±±": date(2026, 1, 20),
    "1/21 (ä¸‰) Day 5: ç‰§æ­Œ & çŠ¬å±±": date(2026, 1, 21),
    "1/22 (å››) Day 6: åå¤å±‹æ¦®å•†åœˆ": date(2026, 1, 22),
    "1/23 (äº”) Day 7: å¤§é ˆ & åå¤å±‹åŸ": date(2026, 1, 23),
    "1/24 (å…­) Day 8: å›ç¨‹": date(2026, 1, 24),
}

# --- 5. è‡ªå‹•åˆ¤æ–·æ—¥æœŸé‚è¼¯ ---
today = datetime.now().date()
# today = date(2026, 1, 17) # <-- æ¸¬è©¦ç”¨ï¼šè§£é™¤è¨»è§£å¯æ¨¡æ“¬ç•¶å¤©

default_index = 0
options = list(trip_dates.keys())
for i, (label, d) in enumerate(trip_dates.items()):
    if d == today:
        default_index = i
        break

# --- 6. ä»‹é¢å‘ˆç¾ ---
st.title("ğŸ‡¯ğŸ‡µ 2026 åå¤å±‹")
selected_day = st.selectbox("ğŸ“… é¸æ“‡è¡Œç¨‹æ—¥æœŸ", options, index=default_index)
st.divider()

# ==========================================
# DAY 1 è©³ç´°è¡Œç¨‹ (å·²å„ªåŒ–)
# ==========================================
if "Day 1" in selected_day:
    st.header("âœˆï¸ Day 1: å•Ÿç¨‹å‰å¾€é‡‘æ¾¤")
    
    # --- é£›æ©Ÿ ---
    with st.container(border=True):
        st.markdown("### ğŸ›« åœ‹æ³°èˆªç©º CX530")
        col1, col2 = st.columns(2)
        col1.write("12:00 TPE èµ·é£›")
        col2.write("15:35 NGO æŠµé”")

    # --- Step 1: æ©Ÿå ´åˆ°åå¤å±‹ (é›»è»Š) ---
    st.subheader("1ï¸âƒ£ æ©Ÿå ´ â” åéµåå¤å±‹ç«™")
    st.info("ğŸ’¡ æ­ä¹˜ **åéµé›»è»Š (Meitetsu Line)** å‰å¾€å¸‚å€")
    
    # æ™‚åˆ»è¡¨ (é è¨­ç¸®èµ·)
    with st.expander("ğŸš† é»æˆ‘çœ‹ï¼šåéµé›»è»Šæ™‚åˆ»è¡¨ (16:00-18:00)", expanded=False):
        st.caption("å»ºè­°æ­ä¹˜ Î¼-Sky (éœ€åŠ è³¼ç¥¨) æˆ– ç‰¹æ€¥ã€‚")
        schedule_data = [
             {"ç™¼è»Š": "16:07", "æŠµé”": "16:35", "è»Šç¨®": "Î¼-Sky", "å‚™è¨»": "éœ€åŠ è³¼"},
             {"ç™¼è»Š": "16:17", "æŠµé”": "16:54", "è»Šç¨®": "ç‰¹æ€¥", "å‚™è¨»": ""},
             {"ç™¼è»Š": "16:21", "æŠµé”": "17:10", "è»Šç¨®": "æº–æ€¥", "å‚™è¨»": "è¼ƒæ…¢"},
             {"ç™¼è»Š": "16:36", "æŠµé”": "17:05", "è»Šç¨®": "Î¼-Sky", "å‚™è¨»": "éœ€åŠ è³¼"},
             {"ç™¼è»Š": "16:44", "æŠµé”": "17:24", "è»Šç¨®": "ç‰¹æ€¥", "å‚™è¨»": ""},
             {"ç™¼è»Š": "16:51", "æŠµé”": "17:40", "è»Šç¨®": "æº–æ€¥", "å‚™è¨»": "è¼ƒæ…¢"},
             {"ç™¼è»Š": "17:06", "æŠµé”": "17:35", "è»Šç¨®": "Î¼-Sky", "å‚™è¨»": "éœ€åŠ è³¼"},
             {"ç™¼è»Š": "17:14", "æŠµé”": "17:54", "è»Šç¨®": "ç‰¹æ€¥", "å‚™è¨»": ""},
             {"ç™¼è»Š": "17:21", "æŠµé”": "18:10", "è»Šç¨®": "æº–æ€¥", "å‚™è¨»": "è¼ƒæ…¢"},
             {"ç™¼è»Š": "17:36", "æŠµé”": "18:05", "è»Šç¨®": "Î¼-Sky", "å‚™è¨»": "éœ€åŠ è³¼"},
        ]
        st.dataframe(pd.DataFrame(schedule_data), hide_index=True, use_container_width=True)

    # --- Step 2: è½‰ä¹˜èˆ‡è³¼ç‰© ---
    st.subheader("2ï¸âƒ£ è½‰ä¹˜ï¼šåéµå·´å£«ä¸­å¿ƒ")
    st.markdown("""
    **å‹•ç·šæŒ‡å¼•ï¼š**
    1. åˆ°é”åéµåå¤å±‹ç«™ (B1F)
    2. æ‰¾ **[è¥¿æ”¹æœ­å£]** å‡ºç«™
    3. æ­é›»æ¢¯è‡³ **3F åéµå·´å£«ä¸­å¿ƒ**
    """)
    
    st.link_button("ğŸ“ å°èˆªï¼šåéµå·´å£«ä¸­å¿ƒ (6è™Ÿä¹˜è»Šè™•)", get_gmap_link("Meitetsu Bus Center", "walking"), type="primary")

    st.warning("âš ï¸ **é‡è¦ä»»å‹™ï¼š**\n1. å·´å£«ç™¼è»Šå‰30åˆ†é˜ä»˜æ¬¾å–ç¥¨ã€‚\n2. **åœ¨æ­¤è™•è³¼è²·é»å¿ƒã€æ™šé¤** (ç¨å¾Œè»Šä¸Šåƒ)ã€‚")

    # --- Step 3: å·´å£«å‰å¾€é‡‘æ¾¤ ---
    st.subheader("3ï¸âƒ£ é«˜é€Ÿå·´å£« â” é‡‘æ¾¤")
    st.write("ğŸšŒ **ä¹˜è»Šè™•ï¼š3æ¨“ 6è™Ÿæœˆå°**")
    st.write("é ç´„ç­æ¬¡ï¼š**17:30** æˆ– **18:30**")
    
    # --- Step 4: ä½å®¿è³‡è¨Š ---
    st.divider()
    st.subheader("ğŸ¨ ä»Šæ™šä½å®¿")
    
    with st.container(border=True):
        st.markdown("**é‡‘æ¾¤å¤§å’Œè¥¿å£**")
        st.caption("ãƒ€ã‚¤ãƒ¯ãƒ­ã‚¤ãƒãƒƒãƒˆãƒ›ãƒ†ãƒ« é‡‘æ²¢é§…è¥¿å£")
        st.markdown("---")
        st.text("ğŸ“ æ—¥ï¼šã€’920-0031 çŸ³å·çœŒé‡‘æ²¢å¸‚åºƒå²¡1-12-17")
        st.text("ğŸ“ è‹±ï¼š1-12-17 Hirooka, Kanazawa, Ishikawa")
        
        st.link_button("ğŸ—ºï¸ å¸¶æˆ‘å»é£¯åº—", get_gmap_link("Daiwa Roynet Hotel Kanazawa-Miyabi", "walking"))


# ==========================================
# DAY 2 - DAY 8 å¤§ç¶± (ä¹‹å¾Œå¯é€æ—¥ç´°ä¿®)
# ==========================================

elif "Day 2" in selected_day:
    st.header("ğŸ£ Day 2: é‡‘æ¾¤æ–‡åŒ–å·¡ç¦®")
    st.success("ä»Šæ—¥é‡é»ï¼šå’Œæœé«”é©—(å¦‚æœæœ‰çš„è©±)ã€å…¼å…­åœ’ç¾æ™¯ã€æµ·é®®")
    
    places = [
        "è¿‘æ±Ÿç”ºå¸‚å ´ (æ—©é¤)", "æ±èŒ¶å±‹è¡—", "å…¼å…­åœ’", "21ä¸–ç´€ç¾è¡“é¤¨", 
        "é‡‘æ¾¤ Focus / é‡‘æ¾¤è»Šç«™ (æ™šé¤)", "Uniqlo / é‡‘æ¾¤å¯¶å¯å¤¢"
    ]
    for place in places:
        st.checkbox(place)
        
    st.link_button("ğŸ“ å°èˆªè‡³ï¼šè¿‘æ±Ÿç”ºå¸‚å ´", get_gmap_link("Omicho Market"))

elif "Day 3" in selected_day:
    st.header("ğŸš— Day 3: è‡ªé§•åˆæŒæ‘")
    st.info("ä»Šæ—¥ä»»å‹™ï¼šç§Ÿè»Šã€å‰å¾€ç™½å·é„‰")
    
    st.markdown("""
    * ğŸ¨ é€€æˆ¿
    * ğŸª 7-11 æ—©é¤
    * ğŸš— **é‡‘æ¾¤ç§Ÿè»Š** (è¨˜å¾—å¸¶é§•ç…§/è­¯æœ¬)
    * ğŸ›– **åˆæŒæ‘** (ç™½å·é„‰)
    * ğŸ± é£›é©’è€è¡— (åˆé¤)
    * ğŸ¥© **é§¿æ²³å±‹ Asumoåº—** (è²·æ°´æœ & å’Œç‰›!)
    * ğŸ¨ ä½å®¿ï¼š**fav é£›é©’é«˜å±±**
    """)
    st.link_button("ğŸ“ å°èˆªè‡³ï¼šfav é£›é©’é«˜å±±", get_gmap_link("fav HOTEL HIDATAKAYAMA EAST"))

elif "Day 4" in selected_day:
    st.header("ğŸ”ï¸ Day 4: é«˜å±±èˆ‡æ–°ç©—é«˜")
    st.markdown("""
    * 08:30 ğŸ **å®®å·æœå¸‚**
    * ğŸš¡ **æ–°ç©—é«˜çºœè»Š** (æ³¨æ„å¤©æ°£)
    * ğŸ± å›é«˜å±±åˆé¤
    * ğŸ¥ **Train Bleu** (çŸ¥åéºµåŒ…åº—)
    * ğŸœ **å‰ç”°è£½éºµæ‰€**
    """)

elif "Day 5" in selected_day:
    st.header("ğŸ¯ Day 5: è¿”å›åå¤å±‹")
    st.markdown("""
    * ğŸ¨ é€€æˆ¿
    * ğŸ **ç‰§æ­Œä¹‹é‡Œ** (åˆé¤)
    * ğŸ¯ **çŠ¬å±±åŸ** (æ³¨æ„ï¼š17:00 é—œé–€)
    * ğŸš— **TOYOTA ç™½å·åº—é‚„è»Š**
    * ğŸ¨ ä½å®¿ï¼š**æ¦®å¼—çˆ¾æœ­ (Hotel Forza Nagoya Sakae)**
    * ğŸ· æ™šé¤ï¼š**åå¤å±‹å‘³å™Œè±¬æ’ é»‘è±šå±‹**
    """)

elif "Day 6" in selected_day:
    st.header("ğŸ›ï¸ Day 6: æ¦®å•†åœˆè³¼ç‰©æ—¥")
    st.markdown("""
    * ğŸ§ **å”å‰è¨¶å¾· æ¦®æœ¬åº—**
    * ğŸ¥© åˆé¤ï¼š**é¦¬å–°ä¸€ä»£ åå¤å±‹æ „** (å·²è¨‚ 11:30)
    * ğŸ¢ **SKYLE** (Uniqlo/GU)
    * ğŸ‘Ÿ **é¬¼å¡šè™ Onitsuka Tiger**
    * âš¡ **å¯¶å¯å¤¢ä¸­å¿ƒ** (Parco æ±é¤¨ 5F)
    * ğŸ± æ™šé¤ï¼š**ç†±ç”°è“¬èŠè»’ æ¾é˜ªå±‹åº—** (16:00 æ’éšŠ!)
    """)

elif "Day 7" in selected_day:
    st.header("ğŸ¯ Day 7: å¤§é ˆèˆ‡åå¤å±‹åŸ")
    st.markdown("""
    * ğŸ¥ª æ—©é¤ï¼š**Konparu Osu (ç‚¸è¦ä¸‰æ˜æ²»)**
    * â›©ï¸ **å¤§é ˆå•†åº—è¡—** (å¤§é ˆè§€éŸ³ã€æ‹›è²¡è²“)
    * ğŸ¯ **åå¤å±‹åŸ**
    * ğŸ§— **mont-bell**
    * ğŸ— æ™šé¤ï¼š**ä¸–ç•Œçš„å±±å°‡ æœ¬åº—** (æ‰‹ç¾½å…ˆ)
    * ğŸ—¼ **Oasis 21** (ç¶ æ´²21)
    * ğŸ° ç”œé»ï¼š**HARBS åå¤å±‹LACHICåº—** (å¤–å¸¶)
    """)

elif "Day 8" in selected_day:
    st.header("âœˆï¸ Day 8: è³¦æ­¸")
    st.markdown("""
    * ğŸ¨ é€€æˆ¿
    * ğŸ” éº¥ç•¶å‹æ—©é¤
    * ğŸšŒ **12:15 åˆ©æœ¨æ´¥å·´å£«**
        * åœ°é»ï¼šç¶ æ´²21 (Oasis 21) 9è™Ÿä¹˜è»Šè™•
        * å‚™è¨»ï¼šç”±åéµå·´å£«ç‡Ÿé‹
    * ğŸ¦ **ä¸­éƒ¨æ©Ÿå ´** (æœ€å¾Œæ¡è²·ï¼šè¦é¤…)
    """)

else:
    st.write("è«‹é¸æ“‡æ—¥æœŸæŸ¥çœ‹è©³ç´°è¡Œç¨‹ã€‚")
