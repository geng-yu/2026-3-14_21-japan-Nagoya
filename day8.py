import streamlit as st
import pandas as pd
from utils import get_gmap_link

def show():

    # ==========================================
    # 0. èˆªç­è³‡è¨Š (ç½®é ‚æé†’)
    # ==========================================
    with st.container(border=True):
        st.subheader("ğŸ›« åœ‹æ³°èˆªç©º CX531")
        st.markdown("""
        16:40 NGO èµ·é£› â†’ 19:15 TPE æŠµé”
        """)
    st.divider()

    # ==========================================
    # 1. æ—©é¤ï¼šéº¥ç•¶å‹
    # ==========================================
    st.subheader("1ï¸âƒ£ éº¥ç•¶å‹(æ—©é¤)")

    st.markdown("**Step 1ï¼šæ­¥è¡Œå°èˆª**")
    st.caption("åœ°é»ï¼šéº¥ç•¶å‹ æ¦®å¤§æ´¥é€šåº—")
    st.link_button("ğŸ” å°èˆªï¼šMcDonald's Sakae Otsudori", get_gmap_link("McDonald's Sakae Otsu-dori", "walking"))
    st.info("ğŸ’¡ **éº¥ç•¶å‹**ï¼šé¬†é¤…æ¼¢å ¡ã€æœŸé–“é™å®šæ´¾")

    st.divider()

    # ==========================================
    # 2. å‰å¾€æ©Ÿå ´ï¼šæ–¹æ¡ˆ A (å·´å£«)
    # ==========================================
    st.subheader("2ï¸âƒ£ äº¤é€šæ–¹æ¡ˆ Aï¼šåˆ©æœ¨æ´¥å·´å£« (å„ªå…ˆ)")

    st.markdown("**Step 1ï¼šå‰å¾€æ­è»Šé»**")
    st.markdown("""
    * **åœ°é»**ï¼šç¶ æ´²21 (Oasis 21) å·´å£«ç¸½ç«™
    * **æœˆå°**ï¼š**9è™Ÿä¹˜è»Šè™•**
    * **ç™¼è»Šæ™‚é–“**ï¼š**12:10** (12:55 æŠµé”æ©Ÿå ´)
    """)
    st.link_button("ğŸšŒ å°èˆªï¼šOasis 21 å·´å£«ç¸½ç«™", get_gmap_link("Oasis 21 Bus Terminal", "walking"))

    st.warning("âš ï¸ **é¢¨éšª**ï¼šå·´å£«å®¢æ»¿ï¼Œç«‹åˆ»è½‰ã€Œæ–¹æ¡ˆ Bã€")

    st.divider()

    # ==========================================
    # 3. å‰å¾€æ©Ÿå ´ï¼šæ–¹æ¡ˆ B (åœ°éµ+åéµ)
    # ==========================================
    st.subheader("3ï¸âƒ£ äº¤é€šæ–¹æ¡ˆ Bï¼šé›»è»Š (å‚™æ¡ˆ)")

    st.markdown("**Step 1ï¼šæ­åœ°éµ (ååŸç·š ç´«è‰²)**")
    st.markdown("`æ¦®ç«™ (Sakae)` â” `é‡‘å±±ç«™ (Kanayama)`")
    st.link_button("ğŸš‡ å°èˆªï¼šæ¦®ç«™ (å…¥å£)", get_gmap_link("Sakae Station Nagoya", "walking"))

    st.markdown("**Step 2ï¼šè½‰ä¹˜åéµ (Meitetsu)**")
    st.markdown("""
    1.  é‡‘å±±ç«™ä¸‹è»Šï¼Œå‡ºç«™å¾Œè·Ÿè‘—ã€Œåéµç·š (Meitetsu Line)ã€æŒ‡æ¨™èµ°ã€‚
    2.  é€²å…¥åéµé–˜é–€ï¼Œå‰å¾€ä¸­éƒ¨åœ‹éš›æ©Ÿå ´æ–¹å‘æœˆå°ã€‚
    3.  **ç¥¨åƒ¹èªªæ˜**ï¼š
        * **ä¸€èˆ¬ç‰¹æ€¥ (éƒ¨åˆ†æŒ‡å®š)**ï¼šè»Šè³‡ Â¥980 (è‡ªç”±åº§) + Â¥450 (æŒ‡å®šè»Šå»‚)ã€‚
        * **Î¼-SKY (å…¨è»ŠæŒ‡å®š)**ï¼šè»Šè³‡ Â¥980 + Î¼-Ticket Â¥450 (å¿…è²·)ã€‚
    """)
    st.link_button("ğŸš„ å°èˆªï¼šåéµé‡‘å±±ç«™", get_gmap_link("Kanayama Station Meitetsu", "walking"))

    # ==========================================
    # æ™‚åˆ»è¡¨ (æ‘ºç–Šå€å¡Š)
    # ==========================================
    with st.expander("ğŸš„ é‡‘å±±ç«™ -> æ©Ÿå ´æ™‚åˆ»è¡¨"):
        st.markdown("[ğŸ”— å®˜ç¶²æ™‚åˆ»è¡¨](https://trainbus.meitetsu.co.jp/meitetsu-transfer-zh-tw/pc/transfer/DepArrTimeList?snode=00001879&gnode=00009406&date=2026-01-24&depTime=12)")
        
        schedule_data = [
            {"å‡ºç™¼": "12:05", "åˆ°é”": "12:36", "è€—æ™‚": "31åˆ†", "è»Šç¨®": "ğŸ”´ ç‰¹æ€¥ (éƒ¨åˆ†æŒ‡å®š)"},
            {"å‡ºç™¼": "12:11", "åˆ°é”": "13:26", "è€—æ™‚": "75åˆ†", "è»Šç¨®": "ğŸ¢ æ™®é€š (ä¸æ¨è–¦)"},
            {"å‡ºç™¼": "12:19", "åˆ°é”": "13:03", "è€—æ™‚": "44åˆ†", "è»Šç¨®": "ğŸŸ¢ æº–æ€¥"},
            {"å‡ºç™¼": "12:24", "åˆ°é”": "12:48", "è€—æ™‚": "24åˆ†", "è»Šç¨®": "ğŸ”µ Î¼-SKY (å…¨è»ŠæŒ‡å®š)"},
            {"å‡ºç™¼": "12:35", "åˆ°é”": "13:06", "è€—æ™‚": "31åˆ†", "è»Šç¨®": "ğŸ”´ ç‰¹æ€¥ (éƒ¨åˆ†æŒ‡å®š)"},
            {"å‡ºç™¼": "12:41", "åˆ°é”": "13:56", "è€—æ™‚": "75åˆ†", "è»Šç¨®": "ğŸ¢ æ™®é€š (ä¸æ¨è–¦)"},
            {"å‡ºç™¼": "12:49", "åˆ°é”": "13:33", "è€—æ™‚": "44åˆ†", "è»Šç¨®": "ğŸŸ¢ æº–æ€¥"},
            {"å‡ºç™¼": "12:54", "åˆ°é”": "13:18", "è€—æ™‚": "24åˆ†", "è»Šç¨®": "ğŸ”µ Î¼-SKY (å…¨è»ŠæŒ‡å®š)"},
            {"å‡ºç™¼": "13:05", "åˆ°é”": "13:36", "è€—æ™‚": "31åˆ†", "è»Šç¨®": "ğŸ”´ ç‰¹æ€¥ (éƒ¨åˆ†æŒ‡å®š)"},
            {"å‡ºç™¼": "13:19", "åˆ°é”": "14:03", "è€—æ™‚": "44åˆ†", "è»Šç¨®": "ğŸŸ¢ æº–æ€¥"},
            {"å‡ºç™¼": "13:24", "åˆ°é”": "13:48", "è€—æ™‚": "24åˆ†", "è»Šç¨®": "ğŸ”µ Î¼-SKY (å…¨è»ŠæŒ‡å®š)"},
        ]
        
        st.caption("ğŸ”µ Î¼-SKY æœ€å¿«(980+450) / ğŸ”´ ç‰¹æ€¥è‡ªç”±åº§è»Šå»‚(980) / ğŸ¢ä¸æ¨è–¦")
        
        df = pd.DataFrame(schedule_data)
        # ä¿®æ­£ï¼šç¢ºä¿æ¬„ä½åç¨±èˆ‡è³‡æ–™ Key ä¸€è‡´
        st.dataframe(
            df, 
            hide_index=True, 
            use_container_width=True,
            column_order=["å‡ºç™¼", "åˆ°é”", "è€—æ™‚", "è»Šç¨®"]
        )

    st.divider()

    # ==========================================
    # 4. æ©Ÿå ´è³¼ç‰©æ”»ç•¥
    # ==========================================
    st.subheader("4ï¸âƒ£ ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ (Centrair) è³¼ç‰©")
    
    st.markdown("**Step 1ï¼šå ±åˆ°å‰ (Landside - 4F Sky Town)**")
    st.markdown("é€™è£¡æœ€å¥½è²·ï¼æ›è¡Œæå‰å…ˆè²·å¥½å¡é€²å»")
    
    with st.expander("ğŸ¦ å¿…è²·ï¼šè¦é¤…ä¹‹é‡Œ (Ebisenbei no Sato)"):
        st.markdown("""
        * **ä½ç½®**ï¼š4F æç‡ˆæ©«ä¸ (äººæœ€å¤šçš„é‚£é–“)
        * **æ¨è–¦**ï¼šç¶œåˆåŒ… (æœ€åˆ’ç®—)ã€æ¢…å­å£å‘³ã€èŠ¥æœ«å£å‘³
        * **æ³¨æ„**ï¼š**å¯ä»¥é€€ç¨…ï¼Œå»ºè­°ç›´æ¥è²·ä¸€ç®±è£ç®±è¨—é‹**
        """)

    with st.expander("ğŸ˜ å…¶ä»– 4F æ¨è–¦"):
        st.markdown("""
        * **èµ¤ç¦ (Akafuku)**ï¼šä¼Šå‹¢åç”¢ï¼Œç´…è±†éº»ç³¬ (ä¿å­˜æœŸé™çŸ­)
        * **å…©å£å±‹æ˜¯æ¸…**ï¼šå‚³çµ±å’Œè“å­ï¼Œé©åˆé€é•·è¼©
        * **å¤©ã‚€ã™ (ç‚¸è¦é£¯ç³°)**ï¼š4F æœ‰ååº—ã€Œåƒå£½ã€ï¼Œé£›æ©Ÿåƒæˆ–ç•¶åˆé¤
        """)

    st.markdown("---")

    st.markdown("**Step 2ï¼šå‡ºå¢ƒå¾Œ (Airside - å…ç¨…åº—)**")
    st.markdown("éå®‰æª¢ã€è­·ç…§æŸ¥é©—å¾Œï¼Œç™»æ©Ÿå‰çš„æœ€å¾Œæ¡è³¼")
    
    with st.expander("ğŸ« å…ç¨…åº—å¿…è²·"):
        st.markdown("""
        * **Royce å·§å…‹åŠ›æ´‹èŠ‹ç‰‡**
        * **æ±äº¬é¦™è•‰ (Tokyo Banana)**ï¼šæ±äº¬åç”¢
        * **ç™½è‰²æˆ€äºº**ï¼šåŒ—æµ·é“åç”¢
        * **é…’é¡**ï¼šçºç¥­ã€ä¹…ä¿ç”°ç­‰æ—¥æœ¬é…’
        * **LeTAO èµ·å¸è›‹ç³•**ï¼šéœ€è³¼è²·ä¿å†·è¢‹
        """)
    st.divider()
    st.subheader("5ï¸âƒ£ æ­æ©Ÿ")
    with st.container(border=True):
        st.subheader("ğŸ›« åœ‹æ³°èˆªç©º CX531")
        st.markdown("""
        16:40 NGO èµ·é£› â†’ 19:15 TPE æŠµé”
        """)
    
if __name__ == "__main__":
    show()
